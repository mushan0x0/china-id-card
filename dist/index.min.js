/* china-id-card v0.0.0 - tonyc726 <zhujf620@gmail.com> */
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var CHECK_CODE_MAP=["1","0","X","9","8","7","6","5","4","3","2"],WEIGHTING_MAP=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],checkBaseFormat=function(e){return/(^\d{15}$)|(^\d{17}(\d|X)$)/i.test(0<arguments.length&&void 0!==e?e:"")},makeYearToYYYY=function(e,t){var r=0<arguments.length&&void 0!==e?e:"",n=1<arguments.length&&void 0!==t?t:19;return/^\d{15}$/.test(r)?"".concat(r.substr(0,6)).concat(n).concat(r.substr(6,r.length-6)):null},checkProvince=function(e){var t=0<arguments.length&&void 0!==e?e:"";return t&&/^(11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82)/.test(t)},checkBirthday=function(e){var t=(0<arguments.length&&void 0!==e?e:"").match(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);if(null===t)return!1;var r=(new Date).getFullYear()-new Date("".concat(t[2],"/").concat(t[3],"/").concat(t[4])).getFullYear();return 0<=r&&r<=130},getCheckCode=function(e){var t=0<arguments.length&&void 0!==e?e:"",r=/^\d{15}$/.test(t)?makeYearToYYYY(t).match(/(^\d{17})/):t.match(/(^\d{17})/);if(null===r)return null;var n=r[1].split("").reduce(function(e,t,r){return e+t*WEIGHTING_MAP[r]},0);return CHECK_CODE_MAP[n%11]},tranformEighteen=function(e,t){var r=makeYearToYYYY(0<arguments.length&&void 0!==e?e:"",1<arguments.length?t:void 0);return null===r?null:"".concat(r).concat(getCheckCode(r))},IDCard=function(){function t(e){if(_classCallCheck(this,t),!checkBaseFormat(e))return console.error("id card format is error!"),!1;this.id=15===e.length?tranformEighteen(e):e,this.isVerified=checkProvince(e)&&checkBirthday(this.id)&&getCheckCode(this.id)===this.id.substr(17,1)}return _createClass(t,[{key:"getMasterCode",value:function(){return this.isVerified?this.id.substr(0,17).toString():null}},{key:"getCheckCode",value:function(){return this.isVerified?this.id.substr(17,1).toString():null}}]),t}(),index=function(e){return new IDCard(e)};exports.default=index,exports.getCheckCode=getCheckCode,exports.tranformEighteen=tranformEighteen;
//# sourceMappingURL=index.min.js.map
